# 🎭 PRD: 캘린더 E2E 테스트 계획

이 문서는 제공된 과제 명세와 평가 기준을 바탕으로 캘린더 애플리케이션의 엔드-투-엔드(E2E) 테스트 계획을 정의합니다.

- **Seed Test (기준):** `playwright.config.ts` 에 정의된 `baseURL`('http://localhost:5173')을 기준으로 합니다.
- **평가 기준 반영:** 모든 테스트는 독립적으로 실행 가능해야 하며(기준 2), 테스트 데이터 생성 및 정리를 각 시나리오 내에서 처리합니다(기준 5).

---

## 1. 기본 일정 관리 (CRUD)

**워크플로우:** 사용자가 기본 일정을 생성, 조회, 수정, 삭제하는 전 과정을 검증합니다.

### 1.1. 새 기본 일정 생성 (Create)
- **Steps:**
    1. `EventForm`에서 '제목', '날짜', '시작 시간', '종료 시간'을 입력합니다.
    2. '일정 추가' 버튼(`[data-testid="event-submit-button"]`)을 클릭합니다.
- **Expected Results:**
    1. `EventList`(`[data-testid="event-list"]`)에 새 일정이 즉시 표시됩니다.
    2. `Calendar`의 'Month' 뷰(`[data-testid="month-view"]`) 해당 날짜 셀에 일정이 표시됩니다.
    3. 폼이 초기화됩니다.

### 1.2. 일정 조회 및 수정 (Read/Update)
- **Steps:**
    1. `EventList`에서 특정 일정의 '수정' 아이콘(`[aria-label="Edit event"]`)을 클릭합니다.
    2. `EventForm`에 해당 일정의 '제목'과 '설명'이 채워지는 것을 확인합니다.
    3. '제목'을 '수정된 일정'으로 변경하고 '일정 수정' 버튼을 클릭합니다.
- **Expected Results:**
    1. `EventList`에서 '수정된 일정'이라는 제목이 즉시 반영됩니다.

### 1.3. 일정 삭제 (Delete)
- **Steps:**
    1. `EventList`에서 특정 일정의 '삭제' 아이콘(`[aria-label="Delete event"]`)을 클릭합니다.
- **Expected Results:**
    1. `EventList`에서 해당 일정이 즉시 사라집니다.

---

## 2. 반복 일정 관리 (CRUD)

**워크플로우:** '매일', '매주' 등 반복 설정을 포함한 일정의 생성, 수정, 삭제 로직을 검증합니다.

### 2.1. 새 반복 일정 생성 (Create)
- **Steps:**
    1. `EventForm`에서 '제목', '날짜' 등을 입력합니다.
    2. '반복 일정' 체크박스를 클릭합니다.
    3. '반복 유형'을 '매일(daily)', '반복 간격'을 '2'로, '반복 종료일'을 5일 뒤로 설정합니다.
    4. '일정 추가' 버튼을 클릭합니다.
- **Expected Results:**
    1. `EventList` 및 'Month' 뷰에 총 3개의 일정이 생성되어 표시됩니다. (오늘, +2일, +4일)

### 2.2. 반복 일정 수정 (Update)
- **Steps:**
    1. 생성된 반복 일정 중 첫 번째 일정의 '수정' 아이콘을 클릭합니다.
    2. `RecurringEventDialog`('반복 일정 수정')가 나타나는지 확인합니다.
    3. '예' ('해당 일정만') 버튼을 클릭합니다.
    4. '제목'을 '수정된 단일 일정'으로 변경하고 '일정 수정' 버튼을 클릭합니다.
- **Expected Results:**
    1. `EventList`에서 첫 번째 일정의 제목만 '수정된 단일 일정'으로 변경되고, 나머지 2개는 원래 제목을 유지합니다.

### 2.3. 반복 일정 삭제 (Delete)
- **Steps:**
    1. 남은 반복 일정 중 하나의 '삭제' 아이콘을 클릭합니다.
    2. `RecurringEventDialog`('반복 일정 삭제')가 나타나는지 확인합니다.
    3. '아니오' ('향후 모든 일정') 버튼을 클릭합니다. (참고: 이 프로젝트는 '아니오'가 모든 관련 일정을 의미함)
- **Expected Results:**
    1. '수정된 단일 일정'을 제외한 나머지 2개의 반복 일정이 모두 `EventList`에서 삭제됩니다.

---

## 3. 일정 겹침 처리

**워크플로우:** 시간이 겹치는 일정을 생성/수정할 때 경고 다이얼로그가 올바르게 표시되는지 검증합니다.

### 3.1. 겹치는 일정 생성 시 경고
- **Setup:** '10:00' - '12:00' 사이의 일정을 미리 생성합니다.
- **Steps:**
    1. '11:00' - '13:00' 사이의 새 일정을 폼에 입력합니다.
    2. '일정 추가' 버튼을 클릭합니다.
- **Expected Results:**
    1. `OverlapDialog`('일정 겹침 경고') 다이얼로그가 나타납니다.
    2. 다이얼로그에 기존 일정의 제목('10:00' - '12:00' 일정)이 표시됩니다.
    3. '취소' 버튼을 클릭하면 일정이 생성되지 않습니다.

### 3.2. 반복 일정 생성 시 겹침 무시
- **Setup:** '10:00' - '12:00' 사이의 일정을 미리 생성합니다.
- **Steps:**
    1. '11:00' - '13:00' 사이의 새 일정을 입력하고, '반복 일정'을 체크합니다.
    2. '일정 추가' 버튼을 클릭합니다.
- **Expected Results:**
    1. `OverlapDialog`가 나타나지 않고, 반복 일정이 즉시 생성됩니다.

---

## 4. 알림 시스템

**워크플로우:** 설정된 알림 시간에 따라 알림이 정확히 노출되는지 검증합니다.

### 4.1. 알림 노출 조건 검증
- **Setup:**
    1. 현재 시간(T)을 고정합니다.
    2. '알림 설정'을 '10분 전'으로 설정하고, 시작 시간을 'T + 10분'으로 하는 새 일정을 생성합니다.
    3. '알림 설정'을 '1분 전'으로 설정하고, 시작 시간을 'T + 5분'으로 하는 두 번째 일정을 생성합니다.
- **Steps:**
    1. 시간을 'T + 1초'로 진행시킵니다.
- **Expected Results:**
    1. '10분 후 [일정1 제목] 일정이 시작됩니다.'라는 알림이 `NotificationCenter`에 표시됩니다.
    2. 두 번째 일정('T + 5분' 시작)에 대한 알림은 표시되지 않습니다.

---

## 5. 검색 및 필터링

**워크플로우:** 검색어 및 뷰(월/주) 변경에 따라 `EventList`와 `Calendar` 뷰의 일정이 올바르게 필터링되는지 검증합니다.

### 5.1. 검색어 필터링 (Read)
- **Setup:**
    1. '월간 회의' (이번 달) 일정 생성
    2. '주간 보고' (이번 주) 일정 생성
    3. '다음 달 회의' (다음 달) 일정 생성
- **Steps:**
    1. '일정 검색' 필드에 '회의'를 입력합니다.
- **Expected Results:**
    1. `EventList`에 '월간 회의'만 표시됩니다. ('다음 달 회의'는 현재 월간 뷰의 필터링에 의해 제외됨)
    2. '주간 보고'는 표시되지 않습니다.
    3. 'Month' 뷰 캘린더에도 '월간 회의'만 표시됩니다.

### 5.2. 뷰 필터링 (Read)
- **Setup:** 위 5.1과 동일. 검색어는 비워둡니다.
- **Steps:**
    1. '뷰 타입 선택'을 'Week'으로 변경합니다.
- **Expected Results:**
    1. `EventList`에 '주간 보고' 일정만 표시됩니다.
    2. '월간 회의'는 표시되지 않습니다.